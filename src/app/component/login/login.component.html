<div class="login-container">
  <div class="login-box">
    <!-- CabeÃ§alho -->
    <div class="login-header">
      <h1 class="login-title">ğŸ­ Admin do AlÃ©m</h1>
      <p class="login-subtitle">Acesso exclusivo para administradores</p>
    </div>

    <!-- FormulÃ¡rio -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Campo Email -->
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <div class="input-container">
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-input"
            [class.error]="email?.invalid && email?.touched"
            placeholder="admin&#64;barbeariadoalem.com"
          />
          <span class="input-icon">ğŸ“§</span>
        </div>
        <div *ngIf="email?.invalid && email?.touched" class="error-message">
          <span *ngIf="email?.errors?.['required']">Email Ã© obrigatÃ³rio</span>
          <span *ngIf="email?.errors?.['email']">Email invÃ¡lido</span>
        </div>
      </div>

      <!-- Campo Senha -->
      <div class="form-group">
        <label for="senha" class="form-label">Senha</label>
        <div class="input-container">
          <input
            id="senha"
            [type]="mostrarSenha ? 'text' : 'password'"
            formControlName="senha"
            class="form-input"
            [class.error]="senha?.invalid && senha?.touched"
            placeholder="Digite sua senha"
          />
          <button 
            type="button" 
            class="toggle-password"
            (click)="toggleSenha()"
            [attr.aria-label]="mostrarSenha ? 'Ocultar senha' : 'Mostrar senha'"
          >
            {{ mostrarSenha ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
          </button>
        </div>
        <div *ngIf="senha?.invalid && senha?.touched" class="error-message">
          <span *ngIf="senha?.errors?.['required']">Senha Ã© obrigatÃ³ria</span>
          <span *ngIf="senha?.errors?.['minlength']">Senha deve ter pelo menos 3 caracteres</span>
        </div>
      </div>

      <!-- Mensagem de feedback -->
      <div *ngIf="mensagem" class="message" [class]="mensagemTipo">
        {{ mensagem }}
        
        <!-- BotÃ£o para limpar dados se estiver "travado" no login -->
        <div *ngIf="mensagemTipo === 'info' && mensagem.includes('jÃ¡ estÃ¡ logado')" style="margin-top: 10px;">
          <button 
            type="button" 
            (click)="forcarLogout()" 
            style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;"
          >
            ğŸ”„ Limpar sessÃ£o e tentar novamente
          </button>
        </div>
      </div>

      <!-- Debug info removido para produÃ§Ã£o -->
      <!-- <div style="color: red; font-size: 12px; margin: 10px 0; border: 1px solid red; padding: 5px;">
        DEBUG: loginForm existe? {{ !!loginForm }} | 
        loginForm vÃ¡lido? {{ loginForm.valid }} | 
        carregando? {{ carregando }}
        <br>Email vÃ¡lido: {{ email?.valid }} | Senha vÃ¡lida: {{ senha?.valid }}
      </div> -->

      <!-- BotÃ£o de Submit -->
      <button
        type="submit"
        class="btn-login"
        [disabled]="carregando || (loginForm && loginForm.invalid)"
      >
        <span *ngIf="carregando" class="spinner">ğŸ”„</span>
        <span *ngIf="!carregando">ğŸš€ Entrar</span>
        <span *ngIf="carregando">Entrando...</span>
      </button>

      <!-- BotÃ£o de fallback caso o principal nÃ£o apareÃ§a -->
      <button 
        *ngIf="!loginForm"
        type="button"
        class="btn-login"
        (click)="onSubmit()"
        style="background: orange; margin-top: 10px;"
      >
        ğŸš¨ Entrar (Modo EmergÃªncia)
      </button>
    </form>

    <!-- RodapÃ© com credenciais padrÃ£o -->
    <div class="login-footer">
      <div class="default-credentials">
        <p><strong>Credenciais PadrÃ£o:</strong></p>
        <p>ğŸ“§ Email: <code>admin&#64;barbeariadoalem.com</code></p>
        <p>ğŸ”‘ Senha: <code>admin123</code></p>
        <small>âš ï¸ Altere estas credenciais em produÃ§Ã£o!</small>
      </div>
      
      <div class="back-link">
        <a routerLink="/home" class="btn-back">â† Voltar ao Site</a>
      </div>
    </div>
  </div>
</div>
