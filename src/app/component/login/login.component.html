<div class="login-container">
  <div class="login-box">
    <!-- Cabeçalho -->
    <div class="login-header">
      <h1 class="login-title">🎭 Admin do Além</h1>
      <p class="login-subtitle">Acesso exclusivo para administradores</p>
    </div>

    <!-- Formulário -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Campo Email -->
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <div class="input-container">
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-input"
            [class.error]="email?.invalid && email?.touched"
            placeholder="admin&#64;barbeariadoalem.com"
          />
          <span class="input-icon">📧</span>
        </div>
        <div *ngIf="email?.invalid && email?.touched" class="error-message">
          <span *ngIf="email?.errors?.['required']">Email é obrigatório</span>
          <span *ngIf="email?.errors?.['email']">Email inválido</span>
        </div>
      </div>

      <!-- Campo Senha -->
      <div class="form-group">
        <label for="senha" class="form-label">Senha</label>
        <div class="input-container">
          <input
            id="senha"
            [type]="mostrarSenha ? 'text' : 'password'"
            formControlName="senha"
            class="form-input"
            [class.error]="senha?.invalid && senha?.touched"
            placeholder="Digite sua senha"
          />
          <button 
            type="button" 
            class="toggle-password"
            (click)="toggleSenha()"
            [attr.aria-label]="mostrarSenha ? 'Ocultar senha' : 'Mostrar senha'"
          >
            {{ mostrarSenha ? '👁️' : '👁️‍🗨️' }}
          </button>
        </div>
        <div *ngIf="senha?.invalid && senha?.touched" class="error-message">
          <span *ngIf="senha?.errors?.['required']">Senha é obrigatória</span>
          <span *ngIf="senha?.errors?.['minlength']">Senha deve ter pelo menos 3 caracteres</span>
        </div>
      </div>

      <!-- Mensagem de feedback -->
      <div *ngIf="mensagem" class="message" [class]="mensagemTipo">
        {{ mensagem }}
        
        <!-- Botão para limpar dados se estiver "travado" no login -->
        <div *ngIf="mensagemTipo === 'info' && mensagem.includes('já está logado')" style="margin-top: 10px;">
          <button 
            type="button" 
            (click)="forcarLogout()" 
            style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;"
          >
            🔄 Limpar sessão e tentar novamente
          </button>
        </div>
      </div>

      <!-- Debug info removido para produção -->
      <!-- <div style="color: red; font-size: 12px; margin: 10px 0; border: 1px solid red; padding: 5px;">
        DEBUG: loginForm existe? {{ !!loginForm }} | 
        loginForm válido? {{ loginForm.valid }} | 
        carregando? {{ carregando }}
        <br>Email válido: {{ email?.valid }} | Senha válida: {{ senha?.valid }}
      </div> -->

      <!-- Botão de Submit -->
      <button
        type="submit"
        class="btn-login"
        [disabled]="carregando || (loginForm && loginForm.invalid)"
      >
        <span *ngIf="carregando" class="spinner">🔄</span>
        <span *ngIf="!carregando">🚀 Entrar</span>
        <span *ngIf="carregando">Entrando...</span>
      </button>

      <!-- Botão de fallback caso o principal não apareça -->
      <button 
        *ngIf="!loginForm"
        type="button"
        class="btn-login"
        (click)="onSubmit()"
        style="background: orange; margin-top: 10px;"
      >
        🚨 Entrar (Modo Emergência)
      </button>
    </form>

    <!-- Rodapé com credenciais padrão -->
    <div class="login-footer">
      <div class="default-credentials">
        <p><strong>Credenciais Padrão:</strong></p>
        <p>📧 Email: <code>admin&#64;barbeariadoalem.com</code></p>
        <p>🔑 Senha: <code>admin123</code></p>
        <small>⚠️ Altere estas credenciais em produção!</small>
      </div>
      
      <div class="back-link">
        <a routerLink="/home" class="btn-back">← Voltar ao Site</a>
      </div>
    </div>
  </div>
</div>
